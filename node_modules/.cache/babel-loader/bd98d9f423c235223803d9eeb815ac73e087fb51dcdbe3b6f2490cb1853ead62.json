{"ast":null,"code":"import _regeneratorRuntime from\"C:/Separate disk/Coding/VS code/Faceprep  assignment/my_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Separate disk/Coding/VS code/Faceprep  assignment/my_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Separate disk/Coding/VS code/Faceprep  assignment/my_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Separate disk/Coding/VS code/Faceprep  assignment/my_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{Button,Card,CardContent,CardMedia,Skeleton,Typography}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var navigate=useNavigate();var LOAD_DELAY=1000;var CARD_HEIGHT=90;// This is the `loginValidator` function.\n// It is used to check if the user is logged in.\nvar loginValidator=function loginValidator(){if(localStorage.getItem(\"username\")!==\"foo\"||localStorage.getItem(\"password\")!==\"bar\"){navigate(\"/\");}};// This is the `logoutHandler` function.\n// It is used to logout the user.\nvar logoutHandler=function logoutHandler(){localStorage.setItem(\"username\",\"\");localStorage.setItem(\"password\",\"\");navigate(\"/\");};useEffect(function(){loginValidator();},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),numCards=_useState8[0],setNumCards=_useState8[1];var userAPI=\"https://randomuser.me/api/?results=\".concat(numCards,\"&page=\").concat(page);// This is the `fetchUserList` function.\n// It is used to fetch the list of users from the API.\nvar fetchUserList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get(userAPI);case 4:response=_context.sent;setUserList(function(prevUserList){return[].concat(_toConsumableArray(prevUserList),_toConsumableArray(response.data.results));});setTimeout(function(){setIsLoading(false);},LOAD_DELAY);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0,\"error\");setIsLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function fetchUserList(){return _ref.apply(this,arguments);};}();// This code is run when the window is resized\nuseEffect(function(){var calculateNumCards=function calculateNumCards(){var windowHeight=window.innerHeight;var numCards=Math.floor(windowHeight/CARD_HEIGHT);setNumCards(numCards);};calculateNumCards();window.addEventListener(\"resize\",calculateNumCards);return function(){window.removeEventListener(\"resize\",calculateNumCards);};},[]);useEffect(function(){fetchUserList();},[numCards,page]);// This is the `handleScroll` function.\n// This code is run when the scroll is used\nuseEffect(function(){var handleScroll=function handleScroll(){if(window.innerHeight+window.scrollY>=document.documentElement.offsetHeight){setPage(function(prevPage){return prevPage+1;});}};window.addEventListener(\"scroll\",handleScroll);return function(){window.removeEventListener(\"scroll\",handleScroll);};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\"},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:logoutHandler,sx:{backgroundColor:\"gold\",color:\"#000\"},children:\"Logout\"})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px\",height:\"88vh\"},children:userList.map(function(user,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Card,{sx:{maxWidth:220,marginBottom:2},children:[/*#__PURE__*/_jsx(CardMedia,{sx:{height:90},image:user.picture.large,title:\"\".concat(user.name.title,\" \").concat(user.name.first)}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{children:\"\".concat(user.name.title,\" \").concat(user.name.first,\" \").concat(user.name.last)})})]}),isLoading&&index===userList.length-1&&/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:220,height:100})]},user.id.name);})})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","Button","Card","CardContent","CardMedia","Skeleton","Typography","jsx","_jsx","jsxs","_jsxs","Home","navigate","LOAD_DELAY","CARD_HEIGHT","loginValidator","localStorage","getItem","logoutHandler","setItem","_useState","_useState2","_slicedToArray","userList","setUserList","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","page","setPage","_useState7","_useState8","numCards","setNumCards","userAPI","concat","fetchUserList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","prevUserList","_toConsumableArray","data","results","setTimeout","t0","console","error","stop","apply","arguments","calculateNumCards","windowHeight","window","innerHeight","Math","floor","addEventListener","removeEventListener","handleScroll","scrollY","document","documentElement","offsetHeight","prevPage","style","margin","children","display","justifyContent","variant","onClick","sx","backgroundColor","color","height","map","user","index","maxWidth","marginBottom","image","picture","large","title","name","first","last","length","width","id"],"sources":["C:/Separate disk/Coding/VS code/Faceprep  assignment/my_app/src/components/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Skeleton,\r\n  Typography,\r\n} from \"@mui/material\";\r\n\r\nfunction Home() {\r\n  const navigate = useNavigate();\r\n  const LOAD_DELAY = 1000;\r\n  const CARD_HEIGHT = 90;\r\n\r\n  // This is the `loginValidator` function.\r\n  // It is used to check if the user is logged in.\r\n  const loginValidator = () => {\r\n    if (\r\n      localStorage.getItem(\"username\") !== \"foo\" ||\r\n      localStorage.getItem(\"password\") !== \"bar\"\r\n    ) {\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  // This is the `logoutHandler` function.\r\n  // It is used to logout the user.\r\n  const logoutHandler = () => {\r\n    localStorage.setItem(\"username\", \"\");\r\n    localStorage.setItem(\"password\", \"\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    loginValidator();\r\n  }, []);\r\n\r\n  const [userList, setUserList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [numCards, setNumCards] = useState(0);\r\n\r\n  const userAPI = `https://randomuser.me/api/?results=${numCards}&page=${page}`;\r\n\r\n  // This is the `fetchUserList` function.\r\n  // It is used to fetch the list of users from the API.\r\n  const fetchUserList = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axios.get(userAPI);\r\n      setUserList((prevUserList) => [\r\n        ...prevUserList,\r\n        ...response.data.results,\r\n      ]);\r\n\r\n      setTimeout(() => {\r\n        setIsLoading(false);\r\n      }, LOAD_DELAY);\r\n    } catch (err) {\r\n      console.error(err, \"error\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // This code is run when the window is resized\r\n  useEffect(() => {\r\n    const calculateNumCards = () => {\r\n      const windowHeight = window.innerHeight;\r\n      const numCards = Math.floor(windowHeight / CARD_HEIGHT);\r\n      setNumCards(numCards);\r\n    };\r\n\r\n    calculateNumCards();\r\n    window.addEventListener(\"resize\", calculateNumCards);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", calculateNumCards);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchUserList();\r\n  }, [numCards, page]);\r\n\r\n\r\n\r\n\r\n  // This is the `handleScroll` function.\r\n  // This code is run when the scroll is used\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (\r\n        window.innerHeight + window.scrollY >=\r\n        document.documentElement.offsetHeight\r\n      ) {\r\n        setPage((prevPage) => prevPage + 1);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        margin: \"20px\",\r\n      }}\r\n    >\r\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={logoutHandler}\r\n          sx={{ backgroundColor: \"gold\", color: \"#000\" }}\r\n        >\r\n          Logout\r\n        </Button>\r\n      </div>\r\n\r\n      <div style={{ margin: \"20px\", height: \"88vh\" }}>\r\n        {userList.map((user, index) => (\r\n          <div key={user.id.name}>\r\n            <Card sx={{ maxWidth: 220, marginBottom: 2 }}>\r\n              <CardMedia\r\n                sx={{ height: 90 }}\r\n                image={user.picture.large}\r\n                title={`${user.name.title} ${user.name.first}`}\r\n              />\r\n              <CardContent>\r\n                <Typography>\r\n                  {`${user.name.title} ${user.name.first} ${user.name.last}`}\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n            {isLoading && index === userList.length - 1 && (\r\n              <Skeleton variant=\"rectangular\" width={220} height={100} />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}